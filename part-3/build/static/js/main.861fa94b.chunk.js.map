{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","Input","fieldName","name","handler","value","onChange","Filter","Form","submitHandler","nameValue","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","personsList","deleteHandler","map","number","key","style","backgroundColor","marginLeft","onClick","Notification","message","className","App","useState","persons","setPersons","newName","setNewName","setNewNumber","searchTerm","setSearchTerm","notificationMessage","setNotificationMessage","errorType","setNotificationType","useEffect","personsService","then","data","catch","e","updateErrorMessage","updateSuccessState","newValues","setTimeout","filter","toLocaleLowerCase","includes","toLowerCase","target","event","preventDefault","newData","findIndex","v","window","confirm","response","filterPerson","person","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.861fa94b.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = `/api/persons`;\n\nconst getAll = () => axios.get(baseUrl);\n\nconst create = (newObject) => axios.post(baseUrl, newObject);\n\nconst update = (id, newObject) => axios.put(`${baseUrl}/${id}`, newObject);\n\nconst deleteItem = (id) => axios.delete(`${baseUrl}/${id}`);\n\nexport default {\n  getAll,\n  create,\n  update,\n  deleteItem,\n};\n","import React, { useState, useEffect } from 'react';\n\nimport personsService from './services/persons';\nimport './App.css';\n\nconst Input = ({ fieldName, name, handler }) => (\n  <div>\n    {fieldName}: <input value={name} onChange={handler} />\n  </div>\n);\n\nconst Filter = ({ name, handler }) => (\n  <Input fieldName='filter shown with' name={name} handler={handler} />\n);\n\nconst Form = ({\n  submitHandler,\n  nameValue,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n}) => (\n  <form onSubmit={submitHandler}>\n    <Input fieldName='name' name={nameValue} handler={handleNameChange} />\n    <Input fieldName='number' name={newNumber} handler={handleNumberChange} />\n    <div>\n      <button type='submit'>add</button>\n    </div>\n  </form>\n);\n\nconst Persons = ({ personsList, deleteHandler }) =>\n  personsList.map(({ name, number, id }) => (\n    <div key={id}>\n      {name} {number}\n      <button\n        style={{ backgroundColor: 'red', marginLeft: '1rem' }}\n        onClick={() => deleteHandler(id)}\n      >\n        delete\n      </button>\n    </div>\n  ));\n\nconst Notification = ({ message, type }) => {\n  if (!message) return null;\n\n  return (\n    <div className={`message ${type === 'error' ? 'error' : 'success'}`}>\n      {message}\n    </div>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [errorType, setNotificationType] = useState('success');\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(({ data }) => setPersons(data))\n      .catch((e) => updateErrorMessage('Server down!'));\n  }, []);\n\n  const updateSuccessState = (message, newValues) => {\n    setNotificationType('success');\n    setNotificationMessage(`${message} ${newName}`);\n    setTimeout(() => setNotificationMessage(null), 3000);\n\n    setPersons(newValues);\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const updateErrorMessage = (message) => {\n    setNotificationType('error');\n    setNotificationMessage(message);\n    setTimeout(() => setNotificationMessage(null), 3000);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const newData = {\n      name: newName,\n      number: newNumber,\n    };\n\n    const hasIndex = persons.findIndex((v) => v.name === newName) > -1;\n\n    if (hasIndex) {\n      const { id } = persons.filter((v) => v.name === newName)[0];\n\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with the new one?`\n        )\n      ) {\n        personsService\n          .update(id, newData)\n          .then((response) => {\n            const filterPerson = persons.map((person) =>\n              person.id !== id ? person : response.data\n            );\n\n            updateSuccessState('Updated', filterPerson);\n          })\n          .catch((error) => {\n            updateErrorMessage(\n              `Information of ${newName} has already been removed from the server.`\n            );\n          });\n        return;\n      }\n    }\n\n    personsService\n      .create(newData)\n      .then((response) => {\n        updateSuccessState('Added', [...persons, response.data]);\n      })\n      .catch((error) => {\n        updateErrorMessage(`Error! Can't add!`);\n      });\n  };\n\n  const handleNameChange = ({ target }) => setNewName(target.value);\n  const handleNumberChange = ({ target }) => setNewNumber(target.value);\n  const handleSearch = ({ target }) => setSearchTerm(target.value);\n\n  const filterList = (list) =>\n    list.filter(({ name }) => {\n      return name.toLocaleLowerCase().includes(searchTerm.toLowerCase());\n    });\n\n  const deleteHandler = (id) => {\n    const { name } = persons.filter((person) => person.id === id)[0];\n\n    if (window.confirm(`Delete ${name}?`)) {\n      personsService\n        .deleteItem(id)\n        .then((response) => {\n          setPersons(persons.filter((person) => person.id !== id));\n          updateErrorMessage(`Deleted ${name}`);\n        })\n        .catch((error) => {\n          updateErrorMessage(`${name} has been already deleted!`);\n        });\n    }\n  };\n\n  const personsList = !searchTerm ? persons : filterList(persons);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} type={errorType} />\n      <Filter name={searchTerm} handler={handleSearch} />\n\n      <h2>Add a new</h2>\n      <Form\n        submitHandler={handleSubmit}\n        nameValue={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <Persons personsList={personsList} deleteHandler={deleteHandler} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}